"""team to user, many to manyRevision ID: 26777e9808c2Revises: 2dda2c7c7e83Create Date: 2013-08-21 14:41:40.905000"""# revision identifiers, used by Alembic.revision = '26777e9808c2'down_revision = '2dda2c7c7e83'from alembic import opimport sqlalchemy as sadef upgrade():    op.create_table("TB_USER_AND_TEAM", sa.Column("team_id", sa.Integer, sa.ForeignKey("TB_TEAM.id")),                    sa.Column("leader_id", sa.Integer, sa.ForeignKey("TB_USER.id")))    op.execute("INSERT INTO TB_USER_AND_TEAM (team_id, leader_id) SELECT t.id, t.leader_id FROM TB_TEAM t")    op.drop_constraint("TB_TEAM_ibfk_2", "TB_TEAM", type_="foreignkey")    op.drop_column("TB_TEAM", "leader_id")def downgrade():    op.add_column("TB_TEAM", sa.Column("leader_id", sa.Integer, sa.ForeignKey("TB_User.id", name="TB_TEAM_ibfk_2")))    op.execute(        "UPDATE TB_TEAM SET leader_id = (SELECT leader_id FROM TB_USER_AND_TEAM t WHERE t.team_id = TB_TEAM.id)")    op.drop_table("TB_USER_AND_TEAM")